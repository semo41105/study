<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>클로저와 스코프</title>
</head>
<body>
    <h1>클로저</h1>
    <h3>지역변수의 스코프(유효범위)</h3>
    <p>함수 내부에 선언된 변수는 밖에서 사용 불가하다.</p>
    <button onclick="test1('홍길동');">버튼</button>
    <script type="text/javascript">
        function test1(name) {
            var output = 'Hello' + name + "님!";
        }
        alert(output);
        //실행해도 선언되지 않았다고 뜬다. 밖에서는 쓸 수 없다는 뜻이다.
    </script>

    <hr>

    <h3>클로저</h3>
    <p>지역변수는 함수가 실행될 때 생성되고 함수가 종료될 때 사라진다.<br>
    하지만 함수를 리턴하는 함수(클로저)를 이용하면 규칙을 위반할 수 있다.
    </p>
    <button onclick="test2('홍길동')();">버튼!</button>
    <script>
        function test2(name) {
            var output = "hello "+name+"님!";
            return function(){ alert(output); }
        }
        
    </script>
    <hr>
    <button onclick="test4(this);">javascript</button>
    <script>
        function test3(subject) {
            var output = "오늘 배운 내용은 "+subject+"입니다.";
            return function () {
                return output;                
            }
        }

        function test4(button) {
            console.log(button);
            var sub = button.innerHTML;
            console.log(sub);
            alert( test3(sub)() );
        }

    </script>
    
</body>
</html>